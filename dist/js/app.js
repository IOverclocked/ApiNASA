'use strict';

//Z przykładową datą 2018-04-15
var urlApi = "https://api.nasa.gov/mars-photos/api/v1/rovers/curiosity/photos?earth_date=2018-04-15&api_key=zUhhKsrSuJSGHV7pjsWlq0BCMYHd1MMazuQ9ZMlP";

$(function () {

    preLoader();
    loadImgToGallery(urlApi);
    loadMoreImgToGallery(urlApi);
    preLoader();
});

var loadMoreImgToGallery = function loadMoreImgToGallery(url) {

    var amountImg = 0;

    $('button').on('click', function (e) {

        e.preventDefault();

        $.ajax({
            url: urlApi
        }).done(function (res) {

            for (var i = amountImg; i < amountImg + 6; i++) {

                var elImg = '<img src="' + res.photos[i].img_src + '" alt="img"/>';
                $('section').append(elImg);
            }

            amountImg += 6;
        }).fail(function (err) {
            console.log(err);
        });
    });
};

var loadImgToGallery = function loadImgToGallery(url) {

    $.ajax({
        url: url
    }).done(function (res) {

        $("body").css({
            background: 'url(' + res.photos[randomImgWith(res.photos.length)].img_src + ') no-repeat center/cover fixed'
        });

        for (var i = 0; i < 6; i++) {
            $('img').eq(i).attr('src', '' + res.photos[i].img_src);
        }
    }).fail(function (err) {
        console.log(err);
    });
};

var randomImgWith = function randomImgWith(nr) {
    return Math.floor(Math.random() * nr + 1);
};

var preLoader = function preLoader() {

    $(document).ajaxStart(function () {

        var elH2 = '<h2></h2>';
        $('header').append(elH2);
        $('button').attr('disabled', true);
        $('h2').addClass('spinner-loader');
    });

    $(document).ajaxComplete(function () {

        $('button').attr('disabled', false);
        $('h2').remove();
    });
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJ1cmxBcGkiLCIkIiwicHJlTG9hZGVyIiwibG9hZEltZ1RvR2FsbGVyeSIsImxvYWRNb3JlSW1nVG9HYWxsZXJ5IiwidXJsIiwiYW1vdW50SW1nIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJhamF4IiwiZG9uZSIsImkiLCJlbEltZyIsInJlcyIsInBob3RvcyIsImltZ19zcmMiLCJhcHBlbmQiLCJmYWlsIiwiY29uc29sZSIsImxvZyIsImVyciIsImNzcyIsImJhY2tncm91bmQiLCJyYW5kb21JbWdXaXRoIiwibGVuZ3RoIiwiZXEiLCJhdHRyIiwibnIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJkb2N1bWVudCIsImFqYXhTdGFydCIsImVsSDIiLCJhZGRDbGFzcyIsImFqYXhDb21wbGV0ZSIsInJlbW92ZSJdLCJtYXBwaW5ncyI6Ijs7QUFDQTtBQUNBLElBQU1BLFNBQVMsd0lBQWY7O0FBRUFDLEVBQUUsWUFBTTs7QUFFSkM7QUFDQUMscUJBQWlCSCxNQUFqQjtBQUNBSSx5QkFBcUJKLE1BQXJCO0FBQ0FFO0FBRUgsQ0FQRDs7QUFTQSxJQUFNRSx1QkFBdUIsU0FBdkJBLG9CQUF1QixDQUFDQyxHQUFELEVBQVM7O0FBRWxDLFFBQUlDLFlBQVksQ0FBaEI7O0FBRUFMLE1BQUUsUUFBRixFQUFZTSxFQUFaLENBQWUsT0FBZixFQUF3QixVQUFDQyxDQUFELEVBQU87O0FBRTNCQSxVQUFFQyxjQUFGOztBQUVBUixVQUFFUyxJQUFGLENBQU87QUFDSEwsaUJBQUtMO0FBREYsU0FBUCxFQUVHVyxJQUZILENBRVEsZUFBTzs7QUFFWCxpQkFBSyxJQUFJQyxJQUFJTixTQUFiLEVBQXdCTSxJQUFJTixZQUFVLENBQXRDLEVBQXlDTSxHQUF6QyxFQUE4Qzs7QUFFMUMsb0JBQUlDLHVCQUFzQkMsSUFBSUMsTUFBSixDQUFXSCxDQUFYLEVBQWNJLE9BQXBDLGtCQUFKO0FBQ0FmLGtCQUFFLFNBQUYsRUFBYWdCLE1BQWIsQ0FBb0JKLEtBQXBCO0FBRUg7O0FBRURQLHlCQUFhLENBQWI7QUFFSCxTQWJELEVBYUdZLElBYkgsQ0FhUSxlQUFPO0FBQ1hDLG9CQUFRQyxHQUFSLENBQVlDLEdBQVo7QUFDSCxTQWZEO0FBZ0JILEtBcEJEO0FBc0JILENBMUJEOztBQTRCQSxJQUFNbEIsbUJBQW1CLFNBQW5CQSxnQkFBbUIsQ0FBQ0UsR0FBRCxFQUFTOztBQUU5QkosTUFBRVMsSUFBRixDQUFPO0FBQ0hMLGFBQUtBO0FBREYsS0FBUCxFQUVHTSxJQUZILENBRVEsZUFBTzs7QUFFWFYsVUFBRSxNQUFGLEVBQVVxQixHQUFWLENBQWM7QUFDVkMsaUNBQW1CVCxJQUFJQyxNQUFKLENBQVdTLGNBQWNWLElBQUlDLE1BQUosQ0FBV1UsTUFBekIsQ0FBWCxFQUE2Q1QsT0FBaEU7QUFEVSxTQUFkOztBQUlBLGFBQUssSUFBSUosSUFBSSxDQUFiLEVBQWdCQSxJQUFJLENBQXBCLEVBQXVCQSxHQUF2QixFQUE0QjtBQUN4QlgsY0FBRSxLQUFGLEVBQVN5QixFQUFULENBQVlkLENBQVosRUFBZWUsSUFBZixDQUFvQixLQUFwQixPQUE4QmIsSUFBSUMsTUFBSixDQUFXSCxDQUFYLEVBQWNJLE9BQTVDO0FBQ0g7QUFFSixLQVpELEVBWUdFLElBWkgsQ0FZUSxlQUFPO0FBQ1hDLGdCQUFRQyxHQUFSLENBQVlDLEdBQVo7QUFDSCxLQWREO0FBZ0JILENBbEJEOztBQW9CQSxJQUFNRyxnQkFBZ0IsU0FBaEJBLGFBQWdCLENBQUNJLEVBQUQ7QUFBQSxXQUFRQyxLQUFLQyxLQUFMLENBQVdELEtBQUtFLE1BQUwsS0FBY0gsRUFBZCxHQUFpQixDQUE1QixDQUFSO0FBQUEsQ0FBdEI7O0FBRUEsSUFBTTFCLFlBQVksU0FBWkEsU0FBWSxHQUFNOztBQUVwQkQsTUFBRStCLFFBQUYsRUFBWUMsU0FBWixDQUFzQixZQUFNOztBQUV4QixZQUFJQyxPQUFRLFdBQVo7QUFDQWpDLFVBQUUsUUFBRixFQUFZZ0IsTUFBWixDQUFtQmlCLElBQW5CO0FBQ0FqQyxVQUFFLFFBQUYsRUFBWTBCLElBQVosQ0FBaUIsVUFBakIsRUFBNkIsSUFBN0I7QUFDQTFCLFVBQUUsSUFBRixFQUFRa0MsUUFBUixDQUFpQixnQkFBakI7QUFFSCxLQVBEOztBQVNBbEMsTUFBRStCLFFBQUYsRUFBWUksWUFBWixDQUF5QixZQUFNOztBQUUzQm5DLFVBQUUsUUFBRixFQUFZMEIsSUFBWixDQUFpQixVQUFqQixFQUE2QixLQUE3QjtBQUNBMUIsVUFBRSxJQUFGLEVBQVFvQyxNQUFSO0FBRUgsS0FMRDtBQU1ILENBakJEIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vL1ogcHJ6eWvFgmFkb3fEhSBkYXTEhSAyMDE4LTA0LTE1XHJcbmNvbnN0IHVybEFwaSA9IFwiaHR0cHM6Ly9hcGkubmFzYS5nb3YvbWFycy1waG90b3MvYXBpL3YxL3JvdmVycy9jdXJpb3NpdHkvcGhvdG9zP2VhcnRoX2RhdGU9MjAxOC0wNC0xNSZhcGlfa2V5PXpVaGhLc3JTdUpTR0hWN3Bqc1dscTBCQ01ZSGQxTU1henVROVpNbFBcIlxyXG5cclxuJCgoKSA9PiB7XHJcblxyXG4gICAgcHJlTG9hZGVyKCk7XHJcbiAgICBsb2FkSW1nVG9HYWxsZXJ5KHVybEFwaSk7XHJcbiAgICBsb2FkTW9yZUltZ1RvR2FsbGVyeSh1cmxBcGkpO1xyXG4gICAgcHJlTG9hZGVyKCk7XHJcblxyXG59KVxyXG5cclxuY29uc3QgbG9hZE1vcmVJbWdUb0dhbGxlcnkgPSAodXJsKSA9PiB7XHJcblxyXG4gICAgbGV0IGFtb3VudEltZyA9IDA7XHJcblxyXG4gICAgJCgnYnV0dG9uJykub24oJ2NsaWNrJywgKGUpID0+IHtcclxuXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHVybEFwaVxyXG4gICAgICAgIH0pLmRvbmUocmVzID0+IHtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBhbW91bnRJbWc7IGkgPCBhbW91bnRJbWcrNjsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGVsSW1nID0gKGA8aW1nIHNyYz1cIiR7cmVzLnBob3Rvc1tpXS5pbWdfc3JjfVwiIGFsdD1cImltZ1wiLz5gKTtcclxuICAgICAgICAgICAgICAgICQoJ3NlY3Rpb24nKS5hcHBlbmQoZWxJbWcpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFtb3VudEltZyArPSA2O1xyXG5cclxuICAgICAgICB9KS5mYWlsKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbn1cclxuXHJcbmNvbnN0IGxvYWRJbWdUb0dhbGxlcnkgPSAodXJsKSA9PiB7XHJcblxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHVybFxyXG4gICAgfSkuZG9uZShyZXMgPT4ge1xyXG5cclxuICAgICAgICAkKFwiYm9keVwiKS5jc3Moe1xyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBgdXJsKCR7cmVzLnBob3Rvc1tyYW5kb21JbWdXaXRoKHJlcy5waG90b3MubGVuZ3RoKV0uaW1nX3NyY30pIG5vLXJlcGVhdCBjZW50ZXIvY292ZXIgZml4ZWRgXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcclxuICAgICAgICAgICAgJCgnaW1nJykuZXEoaSkuYXR0cignc3JjJywgYCR7cmVzLnBob3Rvc1tpXS5pbWdfc3JjfWApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KS5mYWlsKGVyciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcblxyXG59XHJcblxyXG5jb25zdCByYW5kb21JbWdXaXRoID0gKG5yKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqbnIrMSk7XHJcblxyXG5jb25zdCBwcmVMb2FkZXIgPSAoKSA9PiB7XHJcblxyXG4gICAgJChkb2N1bWVudCkuYWpheFN0YXJ0KCgpID0+IHtcclxuXHJcbiAgICAgICAgbGV0IGVsSDIgPSAoJzxoMj48L2gyPicpO1xyXG4gICAgICAgICQoJ2hlYWRlcicpLmFwcGVuZChlbEgyKTtcclxuICAgICAgICAkKCdidXR0b24nKS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpXHJcbiAgICAgICAgJCgnaDInKS5hZGRDbGFzcygnc3Bpbm5lci1sb2FkZXInKTtcclxuXHJcbiAgICB9KVxyXG5cclxuICAgICQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZSgoKSA9PiB7XHJcblxyXG4gICAgICAgICQoJ2J1dHRvbicpLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgICQoJ2gyJykucmVtb3ZlKCk7XHJcblxyXG4gICAgfSlcclxufVxyXG4iXX0=
